{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/loader.js","../src/js/btn-show-more.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nconst lightBox = new SimpleLightbox('.gallery .gallery-item a', {\n  captionDelay: 250, //ms\n  captionsData: 'alt',\n});\nwindow.qwerty = lightBox;\nfunction renderGallery(data) {\n  let markup = '';\n  data.hits.forEach(item => {\n    markup += `\n        <li class=\"gallery-item\">\n            <a href=\"${item.largeImageURL}\">\n                <div class=\"image-wrapper\"><img src=\"${item.webformatURL}\" alt=\"${item.tags}\" /></div>\n                <ul class=\"image-description\">\n                    <li class=\"gallery-description\">\n                        <h3 class=\"description-title\">Likes</h3>\n                        <p class=\"description-value\">${item.likes}</p>\n                    </li>\n                    <li class=\"gallery-description\">\n                        <h3 class=\"description-title\">Views</h3>\n                        <p class=\"description-value\">${item.views}</p>\n                    </li>\n                    <li class=\"gallery-description\">\n                        <h3 class=\"description-title\">Comments</h3>\n                        <p class=\"description-value\">${item.comments}</p>\n                    </li>\n                    <li class=\"gallery-description\">\n                        <h3 class=\"description-title\">Downloads</h3>\n                        <p class=\"description-value\">${item.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>\n        `;\n  });\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightBox.refresh();\n}\nfunction resetGalelry() {\n  gallery.innerHTML = '';\n}\n\nexport { renderGallery, resetGalelry };\n","const loader = document.querySelector('.loader');\nfunction loaderShow() {\n  loader.hidden = false;\n}\n\nfunction loaderHide() {\n  loader.hidden = true;\n}\n\nexport { loaderShow, loaderHide };\n","const loadMore = document.querySelector('.load-more');\n\nfunction showLoadMore({ page, total, per_page }) {\n  if (total - (page - 1) * per_page > 0) {\n    btnMoreShow();\n    return false;\n  } else {\n    btnMoreHide();\n    return true;\n  }\n}\n\nfunction btnMoreShow() {\n  loadMore.hidden = false;\n}\n\nfunction btnMoreHide() {\n  loadMore.hidden = true;\n}\n\nexport { showLoadMore, btnMoreHide };\n","import iziToast from 'izitoast';\nimport axios from 'axios';\n\nimport { renderGallery, resetGalelry } from './render-functions';\nimport { loaderShow, loaderHide } from './loader';\nimport { showLoadMore, btnMoreHide } from './btn-show-more';\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  timeout: 1000,\n  params: { key: '29951838-c03d41fde620325ff539c52c5' },\n});\n\nconst paginationConfig = {\n  page: 1,\n  total: null,\n  query: '',\n  per_page: 15,\n};\n\nasync function fetchImage(query) {\n  if (query) {\n    resetGalelry();\n    loaderShow();\n  }\n  btnMoreHide();\n\n  const searchParams = {\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: query || paginationConfig.query,\n    per_page: paginationConfig.per_page,\n    page: paginationConfig.page,\n  };\n\n  try {\n    const response = await instance.request({\n      params: searchParams,\n    });\n\n    paginationConfig.total = response.data.total;\n    paginationConfig.page += 1;\n    if (query) paginationConfig.query = query;\n\n    if (response.status !== 200) throw new Error(response.status);\n\n    const data = response.data;\n    if (data.totalHits === 0) throw new Error('Empty response');\n\n    renderGallery(data);\n  } catch (error) {\n    iziToast.warning({\n      position: 'topRight',\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  }\n\n  loaderHide();\n  const endOfCollection = showLoadMore(paginationConfig);\n  if (!query) scrollDown();\n  if (!query && endOfCollection)\n    iziToast.success({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n}\n\nfunction scrollDown() {\n  const { height } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n  window.scrollBy({ top: height, behavior: 'smooth' });\n}\n\nexport default fetchImage;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport fetchImage from './js/pixabay-api';\n\nconst searchForm = document.querySelector('form');\nconst loadMore = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchValue = event.target.search.value.trim();\n  if (!searchValue)\n    return iziToast.warning({\n      position: 'topRight',\n      message: 'Please fill-in the search input',\n    });\n  fetchImage(searchValue);\n});\n\nloadMore.addEventListener('click', event => {\n  fetchImage();\n});\n"],"names":["gallery","lightBox","SimpleLightbox","renderGallery","data","markup","item","resetGalelry","loader","loaderShow","loaderHide","loadMore","showLoadMore","page","total","per_page","btnMoreShow","btnMoreHide","instance","axios","paginationConfig","fetchImage","query","searchParams","response","iziToast","endOfCollection","scrollDown","height","searchForm","event","searchValue"],"mappings":"owBAGA,MAAMA,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAW,IAAIC,EAAe,2BAA4B,CAC9D,aAAc,IACd,aAAc,KAChB,CAAC,EACD,OAAO,OAASD,EAChB,SAASE,EAAcC,EAAM,CAC3B,IAAIC,EAAS,GACbD,EAAK,KAAK,QAAQE,GAAQ,CACxBD,GAAU;AAAA;AAAA,uBAESC,EAAK,aAAa;AAAA,uDACcA,EAAK,YAAY,UAAUA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA,uDAIpCA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,uDAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,uDAIVA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,uDAIbA,EAAK,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAMrE,CAAG,EACDN,EAAQ,mBAAmB,YAAaK,CAAM,EAE9CJ,EAAS,QAAO,CAClB,CACA,SAASM,GAAe,CACtBP,EAAQ,UAAY,EACtB,CC7CA,MAAMQ,EAAS,SAAS,cAAc,SAAS,EAC/C,SAASC,GAAa,CACpBD,EAAO,OAAS,EAClB,CAEA,SAASE,GAAa,CACpBF,EAAO,OAAS,EAClB,CCPA,MAAMG,EAAW,SAAS,cAAc,YAAY,EAEpD,SAASC,EAAa,CAAE,KAAAC,EAAM,MAAAC,EAAO,SAAAC,CAAQ,EAAI,CAC/C,OAAID,GAASD,EAAO,GAAKE,EAAW,GAClCC,IACO,KAEPC,IACO,GAEX,CAEA,SAASD,GAAc,CACrBL,EAAS,OAAS,EACpB,CAEA,SAASM,GAAc,CACrBN,EAAS,OAAS,EACpB,CCXA,MAAMO,EAAWC,EAAM,OAAO,CAC5B,QAAS,2BACT,QAAS,IACT,OAAQ,CAAE,IAAK,oCAAsC,CACvD,CAAC,EAEKC,EAAmB,CACvB,KAAM,EACN,MAAO,KACP,MAAO,GACP,SAAU,EACZ,EAEA,eAAeC,EAAWC,EAAO,CAC3BA,IACFf,IACAE,KAEFQ,IAEA,MAAMM,EAAe,CACnB,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGD,GAASF,EAAiB,MAC7B,SAAUA,EAAiB,SAC3B,KAAMA,EAAiB,IAC3B,EAEE,GAAI,CACF,MAAMI,EAAW,MAAMN,EAAS,QAAQ,CACtC,OAAQK,CACd,CAAK,EAMD,GAJAH,EAAiB,MAAQI,EAAS,KAAK,MACvCJ,EAAiB,MAAQ,EACrBE,IAAOF,EAAiB,MAAQE,GAEhCE,EAAS,SAAW,IAAK,MAAM,IAAI,MAAMA,EAAS,MAAM,EAE5D,MAAMpB,EAAOoB,EAAS,KACtB,GAAIpB,EAAK,YAAc,EAAG,MAAM,IAAI,MAAM,gBAAgB,EAE1DD,EAAcC,CAAI,CACnB,MAAe,CACdqB,EAAS,QAAQ,CACf,SAAU,WACV,QACE,0EACR,CAAK,CACF,CAEDf,IACA,MAAMgB,EAAkBd,EAAaQ,CAAgB,EAChDE,GAAOK,IACR,CAACL,GAASI,GACZD,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,4DACf,CAAK,CACL,CAEA,SAASE,GAAa,CACpB,KAAM,CAAE,OAAAC,CAAM,EAAK,SAChB,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CAAE,IAAKA,EAAQ,SAAU,QAAQ,CAAE,CACrD,CCrEA,MAAMC,EAAa,SAAS,cAAc,MAAM,EAC1ClB,EAAW,SAAS,cAAc,YAAY,EAEpDkB,EAAW,iBAAiB,SAAUC,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAcD,EAAM,OAAO,OAAO,MAAM,OAC9C,GAAI,CAACC,EACH,OAAON,EAAS,QAAQ,CACtB,SAAU,WACV,QAAS,iCACf,CAAK,EACHJ,EAAWU,CAAW,CACxB,CAAC,EAEDpB,EAAS,iBAAiB,QAASmB,GAAS,CAC1CT,GACF,CAAC"}